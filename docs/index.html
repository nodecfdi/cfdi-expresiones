<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@nodecfdi/cfdi-expresiones</title><meta name="description" content="Documentation for @nodecfdi/cfdi-expresiones"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@nodecfdi/cfdi-expresiones</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@nodecfdi/cfdi-expresiones</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#nodecfdicfdi-expresiones" id="nodecfdicfdi-expresiones" style="color: inherit; text-decoration: none;">
  <h1>@nodecfdi/cfdi-expresiones</h1>
</a>
<p><a href="https://github.com/nodecfdi/cfdi-expresiones"><img src="https://img.shields.io/badge/source-nodecfdi%2Fcfdi--expressiones-blue?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMTIgMTIgNDAgNDAiPjxwYXRoIGZpbGw9IiMzMzMzMzMiIGQ9Ik0zMiwxMy40Yy0xMC41LDAtMTksOC41LTE5LDE5YzAsOC40LDUuNSwxNS41LDEzLDE4YzEsMC4yLDEuMy0wLjQsMS4zLTAuOWMwLTAuNSwwLTEuNywwLTMuMiBjLTUuMywxLjEtNi40LTIuNi02LjQtMi42QzIwLDQxLjYsMTguOCw0MSwxOC44LDQxYy0xLjctMS4yLDAuMS0xLjEsMC4xLTEuMWMxLjksMC4xLDIuOSwyLDIuOSwyYzEuNywyLjksNC41LDIuMSw1LjUsMS42IGMwLjItMS4yLDAuNy0yLjEsMS4yLTIuNmMtNC4yLTAuNS04LjctMi4xLTguNy05LjRjMC0yLjEsMC43LTMuNywyLTUuMWMtMC4yLTAuNS0wLjgtMi40LDAuMi01YzAsMCwxLjYtMC41LDUuMiwyIGMxLjUtMC40LDMuMS0wLjcsNC44LTAuN2MxLjYsMCwzLjMsMC4yLDQuNywwLjdjMy42LTIuNCw1LjItMiw1LjItMmMxLDIuNiwwLjQsNC42LDAuMiw1YzEuMiwxLjMsMiwzLDIsNS4xYzAsNy4zLTQuNSw4LjktOC43LDkuNCBjMC43LDAuNiwxLjMsMS43LDEuMywzLjVjMCwyLjYsMCw0LjYsMCw1LjJjMCwwLjUsMC40LDEuMSwxLjMsMC45YzcuNS0yLjYsMTMtOS43LDEzLTE4LjFDNTEsMjEuOSw0Mi41LDEzLjQsMzIsMTMuNHoiLz48L3N2Zz4%3D" alt="Source Code"></a>
<a href="https://github.com/nodecfdi/cfdi-expresiones/blob/master/LICENSE"><img src="https://img.shields.io/github/license/nodecfdi/cfdi-expresiones?logo=open-source-initiative&style=flat-square" alt="Software License"></a>
<a href="https://www.npmjs.com/package/@nodecfdi/cfdi-expresiones"><img src="https://img.shields.io/npm/v/@nodecfdi/cfdi-expresiones" alt="Latest Version"></a>
<a href="https://discord.gg/aFGYXvX"><img src="https://img.shields.io/discord/459860554090283019?logo=discord&style=flat-square" alt="Discord"></a></p>
<blockquote>
<p>Library to generate expressions for CFDI 3.3, CFDI 3.2 and RET 1.0</p>
</blockquote>
<p>:us: The documentation of this project is in spanish as this is the natural language for intended audience.</p>
<p>:mexico: La documentación del proyecto está en español porque ese es el lenguaje principal de los usuarios.</p>
<p>Esta librería contiene objetos de ayuda para crear expresiones de CFDI 3.2, CFDI 3.3 y RET 1.0 de acuerdo a la
información técnica del SAT en el Anexo 20. Librería inspirada por la versión para
php <a href="https://github.com/phpcfdi/cfdi-expresiones">https://github.com/phpcfdi/cfdi-expresiones</a></p>
<p>Estas expresiones se utilizan principalmente para dos motivos:</p>
<ol>
<li>Generar el código QR de una representación impresa de un CFDI o RET.</li>
<li>Consultar el WebService del SAT de estado de un CFDI.</li>
</ol>
<p>Ejemplo de expresión para CFDI 3.3:</p>
<pre><code class="language-text">https://verificacfdi.facturaelectronica.sat.gob.mx/default.aspx?id=CEE4BE01-ADFA-4DEB-8421-ADD60F0BEDAC&amp;re=POT9207213D6&amp;rr=DIM8701081LA&amp;tt=2010.01&amp;fe=/OAgdg==
</code></pre>
<p>Ejemplo de expresión para CFDI 3.2:</p>
<pre><code class="language-text">?re=AAA010101AAA&amp;rr=COSC8001137NA&amp;tt=0000001234.567800&amp;id=CEE4BE01-ADFA-4DEB-8421-ADD60F0BEDAC
</code></pre>
<p>Ejemplo de expresión para RET 1.0:</p>
<pre><code class="language-text">?&amp;re=XAXX010101000&amp;nr=12345678901234567890%tt=1234567890.123456&amp;id=ad662d33-6934-459c-a128-BDf0393f0f44
</code></pre>

<a href="#instalación" id="instalación" style="color: inherit; text-decoration: none;">
  <h2>Instalación</h2>
</a>
<pre><code class="language-shell"><span class="hl-0">npm i @nodecfdi/cfdi-expresiones --save</span>
</code></pre>
<p>o</p>
<pre><code class="language-shell"><span class="hl-0">yarn add @nodecfdi/cfdi-expresiones</span>
</code></pre>

<a href="#ejemplo-básico-de-uso" id="ejemplo-básico-de-uso" style="color: inherit; text-decoration: none;">
  <h2>Ejemplo básico de uso</h2>
</a>
<p>Dado que en node como tal no se tiene acceso al api del navegador, más bien es un ambiente de servidor, no tenemos
acceso a Document, por lo que para poder pasar el document a la lib usaremos la lib xmldom, que nos permitirá crear
nuestro documento y pasárselo a esta lib.</p>
<pre><code class="language-ts"><span class="hl-1">import</span><span class="hl-0"> {</span><span class="hl-2">readFileSync</span><span class="hl-0">} </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> {</span><span class="hl-2">DiscoverExtractor</span><span class="hl-0">} </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;@nodecfdi/cfdi-expresiones&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> {</span><span class="hl-2">DOMParser</span><span class="hl-0">} </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;xmldom&#39;</span><span class="hl-0">;</span><br/><span class="hl-4">// creamos el extractor</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">extractor</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">DiscoverExtractor</span><span class="hl-0">();</span><br/><span class="hl-4">// Accedemos al contenido en nuestro archivo XML</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">content</span><span class="hl-0"> = </span><span class="hl-7">readFileSync</span><span class="hl-0">(</span><span class="hl-3">&#39;archivo-cfdi.xml&#39;</span><span class="hl-0">).</span><span class="hl-7">toString</span><span class="hl-0">();</span><br/><span class="hl-4">// generamos el documento con ayuda de DOMParser</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">document</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">DOMParser</span><span class="hl-0">().</span><span class="hl-7">parseFromString</span><span class="hl-0">(</span><span class="hl-2">content</span><span class="hl-0">, </span><span class="hl-3">&#39;text/xml&#39;</span><span class="hl-0">);</span><br/><span class="hl-4">// obtenemos la expresión</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">expression</span><span class="hl-0"> = </span><span class="hl-2">extractor</span><span class="hl-0">.</span><span class="hl-7">extract</span><span class="hl-0">(</span><span class="hl-2">document</span><span class="hl-0">);</span><br/><span class="hl-4">// y también podemos obtener los valores inviduales</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">values</span><span class="hl-0"> = </span><span class="hl-2">extractor</span><span class="hl-0">.</span><span class="hl-7">obtain</span><span class="hl-0">(</span><span class="hl-2">document</span><span class="hl-0">);</span>
</code></pre>
<p>Nota: Actualmente la librería requiere que le pases un objeto de tipo Document, existen muchas libs en node que te dan
el objeto que implementa esa interfaz, en esta lib usamos para pruebas la
librería <a href="https://www.npmjs.com/package/xmldom">xmldom</a>. Y se recomienda usar dicha lib para evitar cualquier error.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/DiscoverExtractor.html" class="tsd-kind-icon">Discover<wbr/>Extractor</a></li><li class="tsd-kind-interface"><a href="interfaces/ExpressionExtractorInterface.html" class="tsd-kind-icon">Expression<wbr/>Extractor<wbr/>Interface</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>